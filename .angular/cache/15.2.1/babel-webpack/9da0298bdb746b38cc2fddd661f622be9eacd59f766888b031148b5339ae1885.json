{"ast":null,"code":"import { Category } from './category';\nimport { Difficulty } from './difficulty';\nimport { DIFFICULTIES, CATEGORIES } from '../constants';\nimport { Selections } from './selections';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/data/questions-data.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../navbar/navbar.component\";\nconst _c0 = [\"difficulties\"];\nconst _c1 = [\"categories\"];\nfunction CategorySelectionComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function CategorySelectionComponent_div_7_Template_button_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.toggleClass($event));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const difficulty_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(difficulty_r7);\n  }\n}\nfunction CategorySelectionComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function CategorySelectionComponent_div_15_Template_button_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.toggleClass($event));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const category_r10 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(category_r10);\n  }\n}\nfunction CategorySelectionComponent_p_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 14);\n    i0.ɵɵtext(1, \"Please select at least one difficulty and at least one category\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CategorySelectionComponent_p_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 15);\n    i0.ɵɵtext(1, \"Loading...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CategorySelectionComponent_p_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 16);\n    i0.ɵɵtext(1, \"Something went wrong! Please try again later!\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let CategorySelectionComponent = /*#__PURE__*/(() => {\n  class CategorySelectionComponent {\n    constructor(questionsDataService, renderer, router) {\n      this.questionsDataService = questionsDataService;\n      this.renderer = renderer;\n      this.router = router;\n      this.difficultyText = DIFFICULTIES;\n      this.categoriesText = CATEGORIES;\n      this.areButtonsSelected = true;\n      this.isLoading = false;\n      this.isErrorMsgShown = false;\n      this.CategoriesEnum = Category;\n      this.DifficultiesEnum = Difficulty;\n      this.difficulties = new Set();\n      this.categories = new Set();\n      this.selections = new Selections(this.difficulties, this.categories);\n      this.retrievedQuestions = new Array();\n    }\n    ngOnInit() {}\n    toggleClass(event) {\n      if (event.target.classList.contains('btn-dark')) {\n        this.renderer.removeClass(event.target, 'btn-dark');\n        this.renderer.addClass(event.target, 'btn-success');\n      } else if (event.target.classList.contains('btn-success')) {\n        this.renderer.removeClass(event.target, 'btn-success');\n        this.renderer.addClass(event.target, 'btn-dark');\n      }\n    }\n    onStart() {\n      this.isErrorMsgShown = false;\n      this.isLoading = true;\n      //matches every character EXCEPT a-z, A-z, 0-9\n      let matcher = /([^a-zA-z0-9]+)/g;\n      for (let elRef of this.difficultiesDiv.nativeElement.childNodes) {\n        // After adding *ngFor to create divs , Angular added another div\n        // made of a comment which breaks this for loop if it iterates through it\n        if (elRef.childNodes.length < 1) {\n          break;\n        }\n        if (elRef.childNodes[0].classList.contains('btn-success')) {\n          this.difficulties.add(this.DifficultiesEnum[elRef.childNodes[0].innerText]);\n        }\n      }\n      for (let elRef of this.categoriesDiv.nativeElement.childNodes) {\n        if (elRef.childNodes.length < 1) {\n          break;\n        }\n        if (elRef.childNodes[0].classList.contains('btn-success')) {\n          this.categories.add(this.CategoriesEnum[elRef.childNodes[0].innerText.replace(matcher, '')]);\n        }\n      }\n      if (this.selections.getCategories().size == 0 || this.selections.getDifficulties().size == 0) {\n        this.areButtonsSelected = false;\n      } else {\n        //data has to be converted to ARRAY instead of SET in order to avoid JSON parsing error in the backend\n        this.areButtonsSelected = true;\n        this.selections.setDifficulties(Array.from(this.difficulties));\n        this.selections.setCategories(Array.from(this.categories));\n        this.questionsDataService.retrieveQuestionsByCategoryAndDifficulty(this.selections).subscribe(data => {\n          data.forEach(x => {\n            this.retrievedQuestions.push(x);\n          });\n          this.questionsDataService.changeRetrievedQuestions(this.retrievedQuestions);\n          this.router.navigate(['/interview-questions']);\n        }, error => {\n          this.isErrorMsgShown = true;\n          this.isLoading = false;\n          this.categories.clear();\n          this.difficulties.clear();\n          this.selections.setCategories(this.categories);\n          this.selections.setDifficulties(this.difficulties);\n        });\n      }\n    }\n  }\n  CategorySelectionComponent.ɵfac = function CategorySelectionComponent_Factory(t) {\n    return new (t || CategorySelectionComponent)(i0.ɵɵdirectiveInject(i1.QuestionsDataService), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  CategorySelectionComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CategorySelectionComponent,\n    selectors: [[\"app-category-selection\"]],\n    viewQuery: function CategorySelectionComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.difficultiesDiv = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.categoriesDiv = _t.first);\n      }\n    },\n    decls: 25,\n    vars: 5,\n    consts: [[1, \"container\"], [1, \"d-flex\", \"justify-content-center\"], [1, \"text-responsive\", \"categories-p\"], [1, \"container\", \"text-center\"], [\"difficulties\", \"\"], [\"class\", \"div-inline-btn\", 4, \"ngFor\", \"ngForOf\"], [\"categories\", \"\"], [1, \"container\", \"div-bottom\"], [1, \"btn\", \"btn-primary\", \"btn-start\", 3, \"click\"], [\"id\", \"error-msg\", \"class\", \"d-flex justify-content-center msg-bottom\", 4, \"ngIf\"], [\"class\", \"d-flex justify-content-center alert alert-warning msg-bottom\", 4, \"ngIf\"], [\"class\", \"d-flex justify-content-center alert alert-danger msg-bottom\", 4, \"ngIf\"], [1, \"div-inline-btn\"], [\"type\", \"button\", 1, \"btn\", \"btn-size\", \"btn-dark\", 3, \"click\"], [\"id\", \"error-msg\", 1, \"d-flex\", \"justify-content-center\", \"msg-bottom\"], [1, \"d-flex\", \"justify-content-center\", \"alert\", \"alert-warning\", \"msg-bottom\"], [1, \"d-flex\", \"justify-content-center\", \"alert\", \"alert-danger\", \"msg-bottom\"]],\n    template: function CategorySelectionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-navbar\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"p\", 2);\n        i0.ɵɵtext(4, \"Select difficulties\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 3, 4);\n        i0.ɵɵtemplate(7, CategorySelectionComponent_div_7_Template, 3, 1, \"div\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(8, \"hr\");\n        i0.ɵɵelementStart(9, \"div\", 0)(10, \"div\", 1)(11, \"p\", 2);\n        i0.ɵɵtext(12, \"Select Question Categories\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"div\", 3, 6);\n        i0.ɵɵtemplate(15, CategorySelectionComponent_div_15_Template, 3, 1, \"div\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(16, \"div\", 7)(17, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function CategorySelectionComponent_Template_button_click_17_listener() {\n          return ctx.onStart();\n        });\n        i0.ɵɵtext(18, \"START\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"div\");\n        i0.ɵɵtemplate(20, CategorySelectionComponent_p_20_Template, 2, 0, \"p\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\");\n        i0.ɵɵtemplate(22, CategorySelectionComponent_p_22_Template, 2, 0, \"p\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\");\n        i0.ɵɵtemplate(24, CategorySelectionComponent_p_24_Template, 2, 0, \"p\", 11);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.difficultyText);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", ctx.categoriesText);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", !ctx.areButtonsSelected);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading && ctx.areButtonsSelected);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isErrorMsgShown);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.NavbarComponent],\n    styles: [\"#error-msg[_ngcontent-%COMP%]{margin-top:33px;color:#8b0000}.btn-arrange[_ngcontent-%COMP%]{margin-top:5%}.btn-size[_ngcontent-%COMP%]{min-width:115px}.btn-start[_ngcontent-%COMP%]{display:table-cell;vertical-align:bottom;min-width:100px;min-height:50px}.div-bottom[_ngcontent-%COMP%]{display:table;text-align:center;margin-top:10%}.categories-p[_ngcontent-%COMP%]{margin-top:25px}.div-inline-btn[_ngcontent-%COMP%]{margin-top:25px;margin-bottom:15px;margin-left:5%;display:inline-flex}.msg-bottom[_ngcontent-%COMP%]{bottom:0;width:100%}@media (min-width: 768px){.h-md-100[_ngcontent-%COMP%]{height:100vh}}@media (min-width: 333px){.msg-bottom[_ngcontent-%COMP%]{position:absolute;clear:both;bottom:0;width:100%}}@media (min-width: 576px){.text-responsive[_ngcontent-%COMP%]{font-size:1.25rem}.text-responsive-smaller[_ngcontent-%COMP%]{font-size:1rem}.msg-bottom[_ngcontent-%COMP%]{position:absolute;clear:both;bottom:0;width:100%}}@media (min-width: 768px){.text-responsive[_ngcontent-%COMP%]{font-size:1.5rem}.text-responsive-smaller[_ngcontent-%COMP%]{font-size:1.25rem}.msg-bottom[_ngcontent-%COMP%]{position:absolute;clear:both;bottom:0;width:100%}}@media (min-width: 992px){.text-responsive[_ngcontent-%COMP%]{font-size:1.75rem}.text-responsive-smaller[_ngcontent-%COMP%]{font-size:1.5rem}.msg-bottom[_ngcontent-%COMP%]{position:absolute;clear:both;bottom:0;width:100%}}@media (min-width: 1200px){.text-responsive[_ngcontent-%COMP%]{font-size:2rem}.text-responsive-smaller[_ngcontent-%COMP%]{font-size:1.75rem}.msg-bottom[_ngcontent-%COMP%]{position:absolute;clear:both;bottom:0;width:100%}}\"]\n  });\n  return CategorySelectionComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}